# Computer Network(From top to bottom)



## Chapter 1

- 所有设备（电脑、游戏机、家用电器）都称为**主机**（host）、**端系统**（end system）。

- **端系统**通过**通信链路**（communication link）和**分组交换机**（packet switch）连接到一起。

- 链路**传输速率**以**bit/s**或者**bps**。

- 当端系统传输数据给另一个端系统，发送端将**报文**（message）**分段**，每段加上**首部字节**。由此形成的信息包称为**分组**（packet）。

- 分组交换机从一条**入通信链路**接收到达的分组，并从它的**出通信链路**转发该分组。

- 分组交换机包括**路由器**（router）和**链路层交换机**（link-layer switch）。

  链路层交换机通常用于**接入网**中

  路由器通常用于**网络核心**中

- 从发送端到接收端，一个**分组**所经历的一系列**通信链路**和**分组交换机**称为通过该网络的**路径**（path）。

- 端系统通过**因特网服务提供商**（Internet Service Provider, ISP）接入因特网。

  每个ISP是一个由多个**分组交换机**和多段**通信链路**组成的网络

- 端系统、分组交换机和其他因特网部件都要运行一系列**协议**（protocol）。

  **TCP**（Transmission Control Protocol, 传输控制协议）

  **IP**（Internet Protocol, 网际协议）定义了在路由器和端系统之间发送和接收的**分组格式**

- 主机可分为**客户**(client)和**服务器**(server)。

- **接入网**（access network）是指将端系统连接到其**边缘路由器**（edge router）的**物理链路**。

  边缘路由器是端系统到任何其他远程端系统上的**第一台路由器**。

  - 家庭接入：数字用户线（DIgital Subscriber Line, DSL）、电缆、FTTH（fible to the home）、拨号、卫星
  - 企业（和家庭）接入：以太网和WiFi
  - 广域无线接入：4G、LTE

- 物理媒体（略）

- 分组以等于该**线路最大传输速率**的速度传输通过通信电路。因此，如果某源端主机或者分组交换机经过一条链路发送一个**L**比特的分组，链路的传输速率为**R**比特/秒，则传输该分组的时间为**L/R**。

- 多数分组交换机在链路的输入端使用**存储转发传输**（store-and-forward transmission）机制。

- N条速率为R的链路组成的路径（N-1个路由器），从源到目的地发送一个分组：

  ![Pic01](https://raw.githubusercontent.com/JIAHONGZHANG/Computer-network/master/src/Pic01.png)

- 每个分组交换机有多条链路与之相连。对于每条相连的链路，该分组交换机具有**输出缓存**（output buffer）（也被称为**输出队列** output queue），它用于**存储路由器准备发往哪条链路的分组**。

- 如果到达的分组需要传输到某条链路，但发现该链路正在忙于传输其他分组，该到达分组必须**在输出缓存中等待**。因此，除了储存转发时延外，分组还要城市输出缓存的**排队时延**（queue delay）。

- 缓存空间有限，一个到达的分组可能发现该缓存已经被其他等待传输的分组完全充满。在此情况下，将出现**分组丢失**（丢包 packet lost）。

- 每台路由器具有一个**转发表**（forwarding table），用于将目的地的地址（或目的地地址的一部分）映射成为输出链路。

- 电路交换（略）

- 四种类型时延：**结点处理时延**（nodal processing delay）、**排队时延**（queuing delay）、**传输时延**（transmission delay）、**传播时延**（propagation delay），这些时延累加起来就是**结点总时延**（total nodal delay）。

- 检查分组首部和决定将该分组导向何处多需要的时间是**处理时延**的一部分。

- 在队列中，当分组在链路上等待传输时，它受到**排队时延**。

- 传输时延见Pic01<https://github.com/JIAHONGZHANG/Computer-network/blob/master/src/Pic01.png>

- 从该链路的起点到路由器B传播所需要的时间是**传播时延**。

- 传输时延L/R，传播时延d/s。

- 端到端时延，Pic02是Pic01的一般式

  ![Pic02](https://raw.githubusercontent.com/JIAHONGZHANG/Computer-network/master/src/Pic02.png)

  端到端时延假设排队时延微不足道。

- 计算机网络中的吞吐量（略）

- 各层的所有协议被称为**协议栈**（protocol stack）。因特网的协议栈由5个层次组成：**物理层**、**链路层**、**网络层**、**运输层**、**应用层**。

- 应用层是网络应用程序及它们的应用层协议存留的地方。因特网的应用层包括**HTTP**（提供web文档的请求和传送），**SMTP**（提供电子邮件报文的传输）和**FIP**（提供两个端系统之间的文件传送）。这种位于应用层的信息分组称为**报文**（message）。

- 运输层在应用程序端点之间传送应用层报文。两个运输协议，**TCP**和**UDP**，利用其中任意一个都能运输应用层报文。我们把运输层分组称为**报文段**（segment）。

- 网络层负责将被称为**数据报**（datagram）的网络层分组从**一台主机移动到另一台主机**。

  在一台源主机中的运输层协议（TCP或UDP）向网络层提交运输层**报文段**和**目的地**，就像通过邮政服务提供目的地址。

  网络层包括著名的**IP协议**，该协议定义了数据报中各个字段以及端系统和路由器如何作用于这些字段。

  网络层也包括决定路由的**路由选择协议**。

- 为了将分组从一个结点（主机或者路由器）移动到路径上的下一个结点，网络层必须依靠链路层的服务。

  链路层的协议包括以太网、WiFi和电缆接入网的DOCSIS协议。

  链路层分组称为**帧**（frame）。

- 物理层（略）

- 封装（略）



## Chapter 2

- 在**客户-服务器体系结构**（client-server architecture）中，有一个总是打开的主机称为服务器，它服务于来自许多其他称为客户的主机的要求。在此结构中，**客户间不相互通信**。

- **P2P体系结构**（P2P architecture）中，对位于数据中心的专用服务器有最小的（或者没有）依赖。相反，应用程序在间断连接的主机对之间使用直接通信，这些主机对被称为**对等方**。

- 在两个不同端系统上的**进程**（process），通过跨越计算机网络交换**报文**而相互通信。**发送进程**生成并向网络中发送报文；**接收进程**接收这些报文并可能将报文发送回去进行响应。

- 对每对通信进程，我们通常将这两个进程之一标识为**客户**（client），而另一个进程标识为**服务器**（server）。对于Web而言，浏览器是客户进程，Web服务器是一台服务器进程。对于P2P文件共享，下载文件的对等方称为客户，上载文件的对等方为服务器。

- 在给定的一对进程的通信对话中，发起通信的进程为客户，在会话开始时等待联系的进程是服务器。

- 进程通过一个称为**套接字**（socket）的软件接口向网络发送报文和从网络接收报文。套接字是同一台主机内应用层和运输层之间的接口。

- 由于套接字是建立网络应用程序的可编程接口，因此套接字也被称为**应用程序编程接口**（Application Programming Interface, API）。

- 发送进程除了需要知道报文送往目的地的主机地址（IP）外，发送进程还需要指定运行在接收主机上的接收进程（接收套接字）。目的地**端口号**（port number）用于这个目的。

- 运输层协议负责将该报文进入接收进程的套接字。一个运输层协议能够为其应用程序提供：可靠数据传输、吞吐量、定时和安全性。

  可靠数据传输：保证应用程序的一端发送的数据正确、完全地交付给该应用程序的另一端。

  吞吐量：发送进程能够向接收进程交付比特的速率。如因特网电话应用程序对语音以32kbps的速率进行编码，那么它也必须以这种速率向网络发送数据，并向接收应用程序交付数据。

  定时：（例子）发送方注入进套接字中的每个比特到达接收方的套接字不迟于100ms。应用在因特电话、虚拟环境、电话会议和多方游戏。

  安全性：运输协议能够为应用程序提供一种或多种安全性服务。

- **TCP服务模型**包括**面向连接服务**和**可靠数据传输服务**。还拥有**拥塞控制机制**。

- **UDP服务**是一种**不提供不必要服务的轻量级运输协议**。UDP在两个进程通信前没有握手过程。UPD**不保证**该报文将到达接收进程。到达接收进程的报文也可能是乱序到达的。

- TCP和UDP都没有提供吞吐量和定时的保证。

- Web的应用层协议是超文本传输协议（HyperText Transfer Protocol, HTTP）。HTTP定义了这些报文的结构以及客户和服务器进行报文交换的方式。**HTTP使用了TCP作为它的支撑运输协议**。

- 服务器向客户发送被请求的文件，而不存储如何关于该客户的状态信息。所以HTTP是一个**无状态协议**（stateless protocol）。

- **往返时间**（Round-Trip Time, RTT）：指一个短分组从客户到服务器再返回客户所花费的时间。

- HTTP非持续连接总响应时间大致为RTT+RTT+服务器传输HTML文件的时间。

- HTTP持续连接。

- HTTP请求报文

![Pic03](https://raw.githubusercontent.com/JIAHONGZHANG/Computer-network/master/src/Pic03.png)

​	第一行叫**请求行**（request line），后面的叫**首部行**（header line）。

- 请求行有三个字段：**方法字段**、**URL字段**和**HTTP版本字段**。方法字段包括GET、POST、HEAD、PUT和DELETE。
- 请求报文通用格式后面有个**实体体**（entity body）。使用GET方法时实体体为空，而使用POST方法时才使用该实体体。
- HTTP响应报文

![Pic04](https://raw.githubusercontent.com/JIAHONGZHANG/Computer-network/master/src/Pic04.png)

​	第一行叫**初始状态行**（status line），中间叫**首部行**（header line），最后叫**实体体**（entity body）。

- Date：首部行指示服务器产生并发送该响应报文的日期和时间，是服务器从它的文件系统中检索到该对象，插入到响应报文，并发送该报文的时间。

  ​